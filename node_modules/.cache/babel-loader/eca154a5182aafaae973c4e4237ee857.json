{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const getBooks = createAsyncThunk(\"book/getBooks\", async (_, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    const res = await fetch(\"http://localhost:3005/books\");\n    const data = await res.json();\n    return data;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const insertBook = createAsyncThunk(\"book/insertBook\", async (bookData, thunkAPI) => {\n  const {\n    rejectWithValue,\n    getState\n  } = thunkAPI;\n\n  try {\n    bookData.userName = getState().auth.name;\n    const res = await fetch(\"http://localhost:3005/books\", {\n      method: \"POST\",\n      body: JSON.stringify(bookData),\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }\n    });\n    const data = await res.json();\n    return data;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const deleteBook = createAsyncThunk(\"book/deleteBook\", async (book, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    await fetch(`http://localhost:3005/books/${book.id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }\n    });\n    return book;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const getBook = createAsyncThunk(\"book/getBook\", async (book, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    await fetch(`http://localhost:3005/books/${book.id}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }\n    });\n    return book;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst bookSlice = createSlice({\n  name: \"book\",\n  initialState: {\n    books: null,\n    isLoading: false,\n    error: null,\n    bookDetails: null\n  },\n  extraReducers: {\n    // get books\n    [getBooks.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [getBooks.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = action.payload;\n    },\n    [getBooks.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    // insert books\n    [insertBook.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [insertBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books.push(action.payload);\n    },\n    [insertBook.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    // delete\n    [deleteBook.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [deleteBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = state.books.filter(element => element.id !== action.payload.id);\n    },\n    [deleteBook.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    // read book\n    [getBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.bookDetails = action.payload;\n    }\n  }\n}); // export\n\nexport default bookSlice.reducer;","map":{"version":3,"sources":["/media/john/New Volume/WEB Devlopment/Projects/#react.js/redux-book-shop/src/store/bookSlice.js"],"names":["createSlice","createAsyncThunk","getBooks","_","thunkAPI","rejectWithValue","res","fetch","data","json","error","message","insertBook","bookData","getState","userName","auth","name","method","body","JSON","stringify","headers","deleteBook","book","id","getBook","bookSlice","initialState","books","isLoading","bookDetails","extraReducers","pending","state","action","fulfilled","payload","rejected","push","filter","element","reducer"],"mappings":"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","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nexport const getBooks = createAsyncThunk(\n  \"book/getBooks\",\n  async (_, thunkAPI) => {\n    const { rejectWithValue } = thunkAPI;\n    try {\n      const res = await fetch(\"http://localhost:3005/books\");\n      const data = await res.json();\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const insertBook = createAsyncThunk(\n  \"book/insertBook\",\n  async (bookData, thunkAPI) => {\n    const { rejectWithValue, getState } = thunkAPI;\n    try {\n      bookData.userName = getState().auth.name;\n      const res = await fetch(\"http://localhost:3005/books\", {\n        method: \"POST\",\n        body: JSON.stringify(bookData),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n        },\n      });\n      const data = await res.json();\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const deleteBook = createAsyncThunk(\n  \"book/deleteBook\",\n  async (book, thunkAPI) => {\n    const { rejectWithValue } = thunkAPI;\n    try {\n      await fetch(`http://localhost:3005/books/${book.id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n        },\n      });\n      return book;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const getBook = createAsyncThunk(\n  \"book/getBook\",\n  async (book, thunkAPI) => {\n    const { rejectWithValue } = thunkAPI;\n    try {\n      await fetch(`http://localhost:3005/books/${book.id}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n        },\n      });\n      return book;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst bookSlice = createSlice({\n  name: \"book\",\n  initialState: {\n    books: null,\n    isLoading: false,\n    error: null,\n    bookDetails: null,\n  },\n  extraReducers: {\n    // get books\n    [getBooks.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [getBooks.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = action.payload;\n    },\n    [getBooks.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    // insert books\n    [insertBook.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [insertBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books.push(action.payload);\n    },\n    [insertBook.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    // delete\n    [deleteBook.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [deleteBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = state.books.filter(\n        (element) => element.id !== action.payload.id\n      );\n    },\n    [deleteBook.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    // read book\n    [getBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.bookDetails = action.payload;\n    },\n  },\n});\n\n// export\nexport default bookSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}